{% extends 'base.html.twig' %}

{% block title %}{{game.name}}{% endblock %}

{% block body %}
    <div class="content game-details">
        <h1>{{game.name}}</h1>
        <div class="game-container">
            <div class="left-side">
                <div class="img">
                    <img src="{{game.imageUrl}}" width=300 alt="">
                </div>
            </div>
            <div class="right-side">
                <div class="details">
                    <p class="dispo"><span class="title">Ã‰tat : </span> {% if game.isBorrowed %} <span class="false">Non disponible</span> {% else %} <span class="true">Disponible</span> {% endif %}</p>
                    <p class="cat"><span class="title">Categorie :</span> <a href="#">{{game.category.name}}</a></p>
                    <h2 class="desc-title">Description</h2>
                    <p class="desc">{{game.description}}</p>
                </div>
                {% if app.user and not game.isBorrowed%}
                <div class="button">
                    <a href="{{ path("borrow_game", { 'id' : game.id }) }}" class="btn">Emprunter</a>
                </div>
                {% endif %}
                <h2>Notes</h2>
                <div class="button">
                    <a href="{{ path("rating_game", { 'id' : game.id}) }}" class="btn">Laisser un avis</a>
                </div>
                {% for rating in ratings %}
                    <p>{{ rating.user }}</p>

                    <p>Commentaire : {{ rating.comment }}</p>
                    <p>Note : {{ rating.note }}</p>

                    {% if is_granted('delete', rating) %}
                        <a href="{{ path('rating_delete', {'id': rating.id }) }}" class="btn btn-outline-danger">supprimer</a>
                    {% endif %}
                    {% if is_granted('edit', rating) %}
                        <a href="{{ path('rating_edit', {'id': rating.id }) }}" class="btn btn-outline-danger">modifier</a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
